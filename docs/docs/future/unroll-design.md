---
title: Unroll - Oite Package Manager and Tooling
description: Design document for Unroll, Script's package manager, build system, and developer tooling ecosystem.
keywords: [unroll, package manager, build system, tooling, future]
---

# Unroll - Runtime & Tooling for Oite

> **Status**: Future Implementation - Archived Design Document
>
> This document describes the planned architecture for Unroll, the runtime
> and tooling ecosystem for the Oite language.

## Overview

**Unroll** is the package manager, build system, and developer tooling for
Script. It manages Rolls dependencies, handles compilation, and provides
developer experience features.

```
┌─────────────────────────────────────────┐
│            User App Code                │
└──────────────────┬──────────────────────┘
                   │
┌──────────────────▼──────────────────────┐
│   Rolls (official system libs)          │
│   @rolls/http, @rolls/tls, @rolls/db    │
└──────────────────┬──────────────────────┘
                   │
┌──────────────────▼──────────────────────┐
│   Unroll (runtime + tooling)            │  ← THIS DOCUMENT
│   pkg manager, lockfiles, bundler, LSP  │
└──────────────────┬──────────────────────┘
                   │
┌──────────────────▼──────────────────────┐
│   Oite (language core)                │
│   compiler, type system, ABI, bootstrap │
└─────────────────────────────────────────┘
```

## CLI Commands

### Project Management

```bash
# Create new project
unroll new my-app
unroll new my-lib --lib

# Initialize in existing directory
unroll init
```

### Dependency Management

```bash
# Add dependencies
unroll add @rolls/http
unroll add @rolls/tls --optional

# Add dev dependencies
unroll add --dev @rolls/test

# Remove dependencies
unroll remove @rolls/http

# Update dependencies
unroll update
unroll update @rolls/http
```

### Build & Run

```bash
# Build project
unroll build
unroll build --release
unroll build --target wasm32

# Run project
unroll run
unroll run --release

# Watch mode (rebuild on changes)
unroll watch

# Clean build artifacts
unroll clean
```

### Testing

```bash
# Run tests
unroll test
unroll test --filter "http*"
unroll test --coverage
```

### Developer Tools

```bash
# Format code
unroll fmt
unroll fmt --check

# Lint code
unroll lint
unroll lint --fix

# Type check
unroll check

# Generate documentation
unroll doc
unroll doc --open
```

### Publishing

```bash
# Login to registry
unroll login

# Publish Roll
unroll publish

# Deprecate version
unroll deprecate 0.1.0 --message "Use 0.2.0 instead"
```

## Project Manifest (unroll.toml)

```toml
[package]
name = "my-app"
version = "0.1.0"
edition = "2025"
license = "MIT"
description = "My awesome app"
repository = "https://github.com/warpy-ai/script"
keywords = ["web", "server"]

[dependencies]
"@rolls/http" = "0.1"
"@rolls/json" = "0.1"

[dev-dependencies]
"@rolls/test" = "0.1"

[features]
default = ["json"]
json = ["@rolls/json"]
full = ["json", "@rolls/tls"]

[build]
target = "native"           # native | wasm32
optimization = "release"    # debug | release
lto = true                  # Link-time optimization

[profile.release]
opt-level = 3
lto = "thin"

[profile.dev]
opt-level = 0
debug = true
```

## Lockfile (unroll.lock)

```toml
# This file is auto-generated by Unroll. Do not edit.
# unroll.lock format version 1

[[package]]
name = "@rolls/http"
version = "0.1.5"
source = "registry+https://rolls.script-lang.org"
checksum = "sha256:abcd1234..."
dependencies = [
    "@rolls/async 0.1.2",
    "@rolls/tls 0.1.0 (optional)",
]

[[package]]
name = "@rolls/async"
version = "0.1.2"
source = "registry+https://rolls.script-lang.org"
checksum = "sha256:efgh5678..."
dependencies = []

[[package]]
name = "@rolls/tls"
version = "0.1.0"
source = "registry+https://rolls.script-lang.org"
checksum = "sha256:ijkl9012..."
dependencies = []
```

## Project Structure

```
my-app/
├── unroll.toml         # Project manifest
├── unroll.lock         # Lockfile (auto-generated)
├── src/
│   ├── main.ot       # Entry point (bin)
│   └── lib.ot        # Library root (lib)
├── tests/
│   └── integration_test.ot
├── benches/
│   └── perf_bench.ot
├── examples/
│   └── basic_usage.ot
└── target/
    ├── debug/
    │   └── my-app      # Debug binary
    └── release/
        └── my-app      # Release binary
```

## Language Server Protocol (LSP)

Unroll includes an LSP server for IDE integration:

### Features

- **Completion**: Auto-complete for types, functions, imports
- **Hover**: Type information and documentation
- **Go to Definition**: Jump to source
- **Find References**: Find all usages
- **Rename**: Refactor symbols
- **Diagnostics**: Real-time error reporting
- **Code Actions**: Quick fixes and refactors
- **Formatting**: Integrated with `unroll fmt`

### Configuration

```json
// VS Code settings.json
{
    "unroll.path": "/usr/local/bin/unroll",
    "unroll.trace.server": "verbose",
    "unroll.inlayHints.enabled": true,
    "unroll.checkOnSave": true
}
```

## Registry

### Public Registry

The default Roll registry at `https://rolls.script-lang.org`:

```bash
# Search for packages
unroll search http

# View package info
unroll info @rolls/http

# View package versions
unroll info @rolls/http --versions
```

### Private Registry

For enterprise use:

```toml
# .unroll/config.toml
[registries]
default = "https://rolls.script-lang.org"
company = "https://rolls.company.internal"

[registries.company]
token = "env:COMPANY_REGISTRY_TOKEN"
```

## Build Pipeline

```
Source Files (.ot)
        │
        ▼
┌───────────────────┐
│   Parse & Check   │  ← Syntax, types, borrow check
└─────────┬─────────┘
          │
          ▼
┌───────────────────┐
│   Bundle & Link   │  ← Resolve imports, tree-shake
└─────────┬─────────┘
          │
          ▼
┌───────────────────┐
│    Compile IR     │  ← SSA IR generation
└─────────┬─────────┘
          │
          ▼
┌───────────────────┐
│   Native Code     │  ← Cranelift JIT / LLVM AOT
└─────────┬─────────┘
          │
          ▼
    Binary / WASM
```

## Cross-Compilation Targets

| Target | Description |
|--------|-------------|
| `x86_64-unknown-linux-gnu` | Linux x64 (glibc) |
| `x86_64-unknown-linux-musl` | Linux x64 (static) |
| `aarch64-unknown-linux-gnu` | Linux ARM64 |
| `x86_64-apple-darwin` | macOS x64 |
| `aarch64-apple-darwin` | macOS ARM64 (Apple Silicon) |
| `x86_64-pc-windows-msvc` | Windows x64 |
| `wasm32-unknown-unknown` | WebAssembly |
| `wasm32-wasi` | WASM + WASI |

```bash
# Cross-compile
unroll build --target aarch64-unknown-linux-gnu
```

## Performance Targets

| Metric | Target |
|--------|--------|
| Cold start | &lt;100ms |
| Incremental build | &lt;500ms |
| LSP response | &lt;50ms |
| Dependency resolution | &lt;1s (cached) |

## Future Features

1. **Workspaces**: Monorepo support with shared dependencies
2. **Plugins**: Build-time code generation
3. **Profiles**: Custom build configurations
4. **Caching**: Distributed build cache
5. **WASM**: First-class WebAssembly support
