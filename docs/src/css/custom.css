/**
 * Global theme overrides for Docusaurus (Infima).
 * This applies a custom OKLCH-based light/dark theme and font stack.
 */

:root {
    /* Base design tokens – light mode */
    --background: oklch(1 0 0);
    --foreground: oklch(0.145 0 0);
    --card: oklch(1 0 0);
    --card-foreground: oklch(0.145 0 0);
    --popover: oklch(1 0 0);
    --popover-foreground: oklch(0.145 0 0);
    --primary: oklch(0.205 0 0);
    --primary-foreground: oklch(0.985 0 0);
    --secondary: oklch(0.97 0 0);
    --secondary-foreground: oklch(0.205 0 0);
    --muted: oklch(0.97 0 0);
    --muted-foreground: oklch(0.556 0 0);
    --accent: oklch(0.97 0 0);
    --accent-foreground: oklch(0.205 0 0);
    --destructive: oklch(0.577 0.245 27.325);
    --destructive-foreground: oklch(0.577 0.245 27.325);
    --border: oklch(0.922 0 0);
    --input: oklch(0.922 0 0);
    --ring: oklch(0.708 0 0);
    --chart-1: oklch(0.646 0.222 41.116);
    --chart-2: oklch(0.6 0.118 184.704);
    --chart-3: oklch(0.398 0.07 227.392);
    --chart-4: oklch(0.828 0.189 84.429);
    --chart-5: oklch(0.769 0.188 70.08);
    --radius: 0.625rem;
    --sidebar: oklch(0.985 0 0);
    --sidebar-foreground: oklch(0.145 0 0);
    --sidebar-primary: oklch(0.205 0 0);
    --sidebar-primary-foreground: oklch(0.985 0 0);
    --sidebar-accent: oklch(0.97 0 0);
    --sidebar-accent-foreground: oklch(0.205 0 0);
    --sidebar-border: oklch(0.922 0 0);
    --sidebar-ring: oklch(0.708 0 0);

    --font-sans:
        "Geist", "Geist Fallback", system-ui, -apple-system, BlinkMacSystemFont,
        "Segoe UI", sans-serif;
    --font-serif: "Instrument Serif", "Georgia", serif;
    --font-mono:
        "Geist Mono", "Geist Mono Fallback", ui-monospace, SFMono-Regular,
        Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    --color-coral: oklch(0.65 0.2 25);

    /* Map design tokens to Infima/Docusaurus variables */
    color-scheme: light;
    --ifm-font-family-base: var(--font-sans);
    --ifm-font-family-monospace: var(--font-mono);

    /* Two-row navbar height */
    --ifm-navbar-height: 6.5rem;

    --ifm-background-color: var(--background);
    --ifm-background-surface-color: var(--card);
    --ifm-color-content: var(--foreground);

    --ifm-color-primary: var(--primary);
    --ifm-color-primary-dark: var(--secondary);
    --ifm-color-primary-darker: var(--secondary);
    --ifm-color-primary-darkest: var(--secondary);
    --ifm-color-primary-light: var(--primary);
    --ifm-color-primary-lighter: var(--primary);
    --ifm-color-primary-lightest: var(--primary);

    --ifm-border-color: var(--border);
    --ifm-toc-border-color: var(--border);
    --ifm-menu-color-background-active: var(--sidebar-accent);
    --ifm-navbar-background-color: var(--sidebar);
    --ifm-footer-background-color: var(--sidebar);

    --ifm-code-font-size: 95%;
    --docusaurus-highlighted-code-line-bg: oklch(0.96 0 0 / 0.7);
}

/* Dark mode – driven by Docusaurus data-theme attribute */
[data-theme="dark"] {
    color-scheme: dark;

    --background: oklch(0.145 0 0);
    --foreground: oklch(0.985 0 0);
    --card: oklch(0.145 0 0);
    --card-foreground: oklch(0.985 0 0);
    --popover: oklch(0.145 0 0);
    --popover-foreground: oklch(0.985 0 0);
    --primary: oklch(0.985 0 0);
    --primary-foreground: oklch(0.205 0 0);
    --secondary: oklch(0.269 0 0);
    --secondary-foreground: oklch(0.985 0 0);
    --muted: oklch(0.269 0 0);
    --muted-foreground: oklch(0.708 0 0);
    --accent: oklch(0.269 0 0);
    --accent-foreground: oklch(0.985 0 0);
    --destructive: oklch(0.396 0.141 25.723);
    --destructive-foreground: oklch(0.637 0.237 25.331);
    --border: oklch(0.269 0 0);
    --input: oklch(0.269 0 0);
    --ring: oklch(0.439 0 0);
    --chart-1: oklch(0.488 0.243 264.376);
    --chart-2: oklch(0.696 0.17 162.48);
    --chart-3: oklch(0.769 0.188 70.08);
    --chart-4: oklch(0.627 0.265 303.9);
    --chart-5: oklch(0.645 0.246 16.439);
    --sidebar: oklch(0.205 0 0);
    --sidebar-foreground: oklch(0.985 0 0);
    --sidebar-primary: oklch(0.488 0.243 264.376);
    --sidebar-primary-foreground: oklch(0.985 0 0);
    --sidebar-accent: oklch(0.269 0 0);
    --sidebar-accent-foreground: oklch(0.985 0 0);
    --sidebar-border: oklch(0.269 0 0);
    --sidebar-ring: oklch(0.439 0 0);

    --ifm-background-color: var(--background);
    --ifm-background-surface-color: var(--card);
    --ifm-color-content: var(--foreground);
    --ifm-color-primary: var(--primary);
    --ifm-border-color: var(--border);
    --ifm-toc-border-color: var(--border);
    --ifm-menu-color-background-active: var(--sidebar-accent);
    --ifm-navbar-background-color: var(--sidebar);
    --ifm-footer-background-color: var(--sidebar);
    --docusaurus-highlighted-code-line-bg: oklch(0.2 0 0 / 0.9);
}

/* Global shell layout similar to Bun docs */
html,
body {
    background: var(--background);
    color: var(--foreground);
}

body {
    font-family: var(--font-sans);
}

.main-wrapper {
    background: var(--background);
    min-height: 100vh;
}

[data-theme="dark"] .main-wrapper {
    background:
        radial-gradient(
            circle at top left,
            oklch(0.2 0 0 / 0.8),
            transparent 55%
        ),
        radial-gradient(
            circle at top right,
            oklch(0.2 0 0 / 0.7),
            transparent 50%
        ),
        var(--background);
}

.navbar.navbar--fixed-top {
    box-shadow: 0 1px 0 var(--border);
    backdrop-filter: blur(12px);
    background: color-mix(in oklch, var(--sidebar) 90%, black 10%);
}

.navbar__inner {
    max-width: 1120px;
    margin: 0 auto;
}

.navbar__brand {
    font-family: var(--font-serif);
}

.navbar__link,
.navbar__item .navbar__link {
    font-family: var(--font-sans);
}

/* CTA button styling similar to Bun */
.navbar__item--cta .navbar__link {
    background: var(--primary);
    color: var(--primary-foreground);
    border-radius: 0.5rem;
    padding: 0.5rem 1rem;
    font-weight: 500;
    transition: all 0.2s ease;
}

.navbar__item--cta .navbar__link:hover {
    background: color-mix(in oklch, var(--primary) 90%, black 10%);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px oklch(0.2 0 0 / 0.3);
}

[data-theme="dark"] .navbar__item--cta .navbar__link {
    background: var(--primary);
    color: var(--primary-foreground);
}

[data-theme="dark"] .navbar__item--cta .navbar__link:hover {
    background: color-mix(in oklch, var(--primary) 95%, white 5%);
}

/* Search bar styling */
.navbar__search {
    margin-left: 1rem;
    margin-right: 1rem;
}

.navbar__search-input {
    background: var(--input);
    border: 1px solid var(--border);
    border-radius: 0.5rem;
    padding: 0.5rem 1rem;
    font-size: 0.9rem;
    transition: all 0.2s ease;
}

.navbar__search-input:focus {
    outline: none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px oklch(0.5 0.1 0 / 0.1);
}

/* Navbar item spacing */
.navbar__item {
    margin: 0 0.25rem;
}

.footer {
    border-top: 1px solid var(--border);
    background: color-mix(in oklch, var(--sidebar) 92%, black 8%);
}

/* Oite typography */
h1,
h2,
.hero__title {
    font-family: var(--font-serif);
}

body,
p,
li {
    font-family: var(--font-sans);
}

code,
pre {
    font-family: var(--font-mono);
}

/* Constrain content similar to Bun’s central column */
.container {
    max-width: 1120px;
}

.container--fluid {
    max-width: 1280px;
}

/* Docs layout: sidebar + content shell */
.docPage {
    background: transparent;
}

.docSidebarContainer {
    background: var(--sidebar);
    border-right: 1px solid var(--sidebar-border);
}

.docSidebarContainer,
.docMainContainer {
    padding-top: 1.25rem;
    padding-bottom: 1.25rem;
}

/* Sidebar layout - 16px horizontal padding to match header */
.theme-doc-sidebar-container {
    --doc-sidebar-width: 280px;
}

/* Reset default padding, we control it via .theme-doc-sidebar-menu */
.theme-doc-sidebar-container > div {
    padding: 0 !important;
}

.theme-doc-sidebar-menu {
    padding: 1rem !important;
    margin-left: 1.8rem !important;
}

.docMainContainer {
    background: transparent;
}

.theme-doc-markdown {
    background: var(--card);
    border-radius: 1.25rem;
    border: 1px solid var(--border);
    padding: 2.25rem 2.5rem;
    box-shadow: 0 18px 45px oklch(0.12 0 0 / 0.8);
}

@media screen and (max-width: 996px) {
    .theme-doc-markdown {
        border-radius: 1.25rem 1.25rem 0 0;
        padding: 1.75rem 1.5rem;
        box-shadow: none;
    }
}

/* Blog cards / list alignment */
.blog-list-page .col--8 {
    max-width: 48rem;
}

.blog-list-page article,
.blog-post-page article {
    background: var(--card);
    border-radius: 1.25rem;
    border: 1px solid var(--border);
    padding: 1.75rem 1.9rem;
    box-shadow: 0 18px 45px oklch(0.12 0 0 / 0.7);
}

.blog-post-page .theme-doc-markdown {
    box-shadow: none;
    border-radius: 1.25rem;
}

/* ========================================
   Sidebar Styling (Bun-style)
   ======================================== */

/* Regular menu links */
.menu__link {
    border-radius: 0.5rem;
    padding: 0.5rem;
    margin: 0;
    color: var(--muted-foreground);
    font-size: 0.875rem;
    font-weight: 400;
    line-height: 1.4;
    transition: all 0.15s ease;
}

.menu__link:hover {
    background: transparent;
    color: var(--foreground);
}

/* Active link - coral/pink highlight like Bun */
.menu__link--active {
    background: oklch(0.45 0.15 360 / 0.15);
    color: var(--color-coral);
    font-weight: 500;
}

[data-theme="dark"] .menu__link--active {
    background: oklch(0.65 0.2 360 / 0.15);
    color: oklch(0.75 0.18 360);
}

.menu__link--active:hover {
    background: oklch(0.45 0.15 360 / 0.2);
    color: var(--color-coral);
}

[data-theme="dark"] .menu__link--active:hover {
    background: oklch(0.65 0.2 360 / 0.2);
}

/* Menu list spacing */
.menu__list {
    padding-left: 0 !important;
    margin: 0;
}

.menu__list .menu__list {
    padding-left: 0.25rem;
    margin-left: 0.75rem;
    border-left: 1px solid var(--border);
}

.menu__list-item {
    margin: 0;
}

.menu__list-item:not(:last-child) {
    margin-bottom: 0.125rem;
}

/* Category headers (sections) */
.theme-doc-sidebar-item-category > .menu__list-item-collapsible {
    margin-top: 1.25rem;
    padding-top: 1.25rem;
    border-top: 1px solid var(--border);
}

.theme-doc-sidebar-item-category:first-child > .menu__list-item-collapsible {
    margin-top: 0;
    padding-top: 0;
    border-top: none;
}

.menu__list-item-collapsible .menu__link {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--foreground);
    padding: 0.375rem 0.75rem;
}

.menu__list-item-collapsible .menu__link:hover {
    background: transparent;
}

/* Category caret/arrow */
.menu__caret {
    padding: 0.25rem;
}

.menu__caret::before {
    background: var(--muted-foreground);
    width: 1rem;
    height: 1rem;
}

/* Nested category items */
.theme-doc-sidebar-item-category
    .theme-doc-sidebar-item-category
    > .menu__list-item-collapsible {
    margin-top: 0.5rem;
    padding-top: 0;
    border-top: none;
}

/* Sidebar container */
.theme-doc-sidebar-container {
    border-right: none !important;
}

/* Remove the pill shape, use subtle rounded corners */
.menu__link--sublist-caret::after {
    background-size: 1.25rem 1.25rem;
    opacity: 0.5;
}

/* Mobile sidebar overlay */
.theme-doc-sidebar-menu.menu--responsive {
    background: var(--sidebar);
}

/* ========================================
   Two-Row Navbar (Bun-style)
   ======================================== */

/* Tab styling (Compiler, Unroll, Rolls) - pill style like Bun */
.navbar__item--tab {
    margin: 0 0.125rem;
}

.navbar__item--tab .navbar__link {
    display: inline-flex;
    align-items: center;
    padding: 0.5rem 1rem;
    font-weight: 500;
    font-size: 0.9rem;
    color: var(--muted-foreground);
    border-radius: 0.375rem;
    transition: all 0.15s ease;
    background: transparent;
    position: relative;
}

.navbar__item--tab .navbar__link:hover {
    color: var(--foreground);
    background: var(--accent);
}

.navbar__item--tab .navbar__link--active,
.navbar__item--tab.navbar__item--active .navbar__link {
    color: var(--foreground);
    background: var(--accent);
    font-weight: 600;
    position: relative;
}

/* Active tab indicator line */
.navbar__item--tab .navbar__link--active::after,
.navbar__item--tab.navbar__item--active .navbar__link::after {
    content: "";
    position: absolute;
    bottom: 0;
    left: 0.5rem;
    right: 0.5rem;
    height: 2px;
    background: var(--color-coral);
    border-radius: 1px;
}

/* Secondary links (Guides, Blog, GitHub) */
.navbar__item--secondary .navbar__link {
    font-size: 0.875rem;
    color: var(--muted-foreground);
    padding: 0.4rem 0.75rem;
}

.navbar__item--secondary .navbar__link:hover {
    color: var(--foreground);
}
