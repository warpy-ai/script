// Comprehensive test for structural type checker
console.log("=== Structural Type Checker Tests ===\n");

// Test 1: Valid variable declaration
console.log("Test 1: Valid variable declaration");
let source1 = "let x: number = 42;";
let ast1 = parseSource(source1);
let result1 = Types_check(ast1);
console.log("  Errors: " + result1.errors.length + " (expected: 0)");

// Test 2: Invalid variable declaration - string to number
console.log("\nTest 2: Type mismatch (string to number)");
let source2 = "let y: number = \"hello\";";
let ast2 = parseSource(source2);
let result2 = Types_check(ast2);
console.log("  Errors: " + result2.errors.length + " (expected: 1)");
if (result2.errors.length > 0) {
    console.log("  Message: " + result2.errors[0].message);
}

// Test 3: Valid string assignment
console.log("\nTest 3: Valid string assignment");
let source3 = "let s: string = \"world\";";
let ast3 = parseSource(source3);
let result3 = Types_check(ast3);
console.log("  Errors: " + result3.errors.length + " (expected: 0)");

// Test 4: Boolean type check
console.log("\nTest 4: Type mismatch (number to boolean)");
let source4 = "let b: boolean = 123;";
let ast4 = parseSource(source4);
let result4 = Types_check(ast4);
console.log("  Errors: " + result4.errors.length + " (expected: 1)");
if (result4.errors.length > 0) {
    console.log("  Message: " + result4.errors[0].message);
}

// Test 5: Any type accepts anything
console.log("\nTest 5: Any type accepts number");
let source5 = "let a: any = 42;";
let ast5 = parseSource(source5);
let result5 = Types_check(ast5);
console.log("  Errors: " + result5.errors.length + " (expected: 0)");

// Test 6: Type inference without annotation
console.log("\nTest 6: Type inference (no annotation)");
let source6 = "let inferred = 100;";
let ast6 = parseSource(source6);
let result6 = Types_check(ast6);
console.log("  Errors: " + result6.errors.length + " (expected: 0)");

console.log("\n=== All Tests Complete ===");
